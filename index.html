<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Blockly sample</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/10.4.1/blockly.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/blockly/10.4.1/blocks_compressed.min.js"></script>
</head>
<body>
	<div id="blocklyDiv" style="width:800px;height:600px;"></div>
	<textarea id="confirm" style="width:500px;height:100px;"></textarea><br>
	<button id="run">実行</button>
	<script src="/blocks.js"></script>
	<script>	
		var workspace = Blockly.inject('blocklyDiv', {toolbox: toolbox});

		workspace.addChangeListener(function(){
			var code = Blockly.JavaScript.workspaceToCode(workspace);
			document.getElementById("confirm").value = code;
		});

		run.addEventListener("click", function(){
			var code = Blockly.JavaScript.workspaceToCode(workspace);

			try {
				eval(code);
			} catch (error) {
				alert("Code ERROR: " + error);
			}
		});
	</script>
</body>
</html>
